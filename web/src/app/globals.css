@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== Theme Variables ===== */
:root {
  --bg-darkest: #0f0e17;
  --bg-dark: #1a1a2e;
  --bg-mid: #232946;
  --bg-panel: #2d334a;
  --bg-panel-light: #3a3f5c;
  --border-dark: #111122;
  --border-light: #4a4e6e;
  --border-highlight: #6e72a0;
  --text-default: #d4d4e0;
  --text-dim: #8888aa;
  --text-bright: #fffffe;
  --gold: #f5c542;
  --gold-dark: #c49a2a;
  --green: #2ee67a;
  --green-dark: #1a9e50;
  --blue: #4488ff;
  --red: #ff4455;
  --red-dark: #bb2233;
  --purple: #cc44ff;
  --orange: #ff8844;
  --cyan: #44ddee;
  --brown: #8d6e52;
  --stone: #6e7788;
  --hp-red: #e24040;
  --mp-blue: #4080e2;
  --font-primary: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  --font-size-base: 11px;
  --border-radius: 6px;
  --image-rendering: auto;
  --scanline-opacity: 0;
  --pixel-grid-opacity: 0;
  --shadow-pixel: 0 1px 3px rgba(0,0,0,0.3), 0 1px 2px rgba(0,0,0,0.2);
  --shadow-pixel-raised: 0 2px 6px rgba(0,0,0,0.3);
  --shadow-pixel-gold: 0 2px 8px rgba(212, 168, 67, 0.3);
  --shadow-pixel-pressed: inset 0 1px 3px rgba(0,0,0,0.3);
}

/* --- AAA Neutral (default) --- */
[data-theme="neutral"] {
  --font-primary: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  --font-size-base: 11px;
  --border-radius: 6px;
  --image-rendering: auto;
  --scanline-opacity: 0;
  --pixel-grid-opacity: 0;
  --gold: #d4a843;
  --gold-dark: #b08a30;
  --shadow-pixel: 0 1px 3px rgba(0,0,0,0.3), 0 1px 2px rgba(0,0,0,0.2);
  --shadow-pixel-raised: 0 2px 6px rgba(0,0,0,0.3);
  --shadow-pixel-gold: 0 2px 8px rgba(212, 168, 67, 0.3);
  --shadow-pixel-pressed: inset 0 1px 3px rgba(0,0,0,0.3);
}

/* --- Pixel Game --- */
[data-theme="pixel"] {
  --font-primary: 'Press Start 2P', monospace;
  --font-size-base: 8px;
  --border-radius: 0px;
  --image-rendering: pixelated;
  --scanline-opacity: 0.06;
  --pixel-grid-opacity: 0.03;
  --gold: #f5c542;
  --gold-dark: #c49a2a;
  --shadow-pixel: inset -2px -2px 0 #111122, inset 2px 2px 0 #4a4e6e;
  --shadow-pixel-raised: inset -2px -2px 0 #111122, inset 2px 2px 0 #6e72a0, 4px 4px 0 #0a0a14;
  --shadow-pixel-gold: inset -2px -2px 0 #c49a2a, inset 2px 2px 0 #ffe066, 4px 4px 0 #0a0a14;
  --shadow-pixel-pressed: inset 2px 2px 0 #111122, inset -2px -2px 0 #4a4e6e;
}

/* --- Matrix Hacker --- */
[data-theme="matrix"] {
  --font-primary: 'JetBrains Mono', 'Fira Code', 'Consolas', monospace;
  --font-size-base: 10px;
  --border-radius: 2px;
  --image-rendering: auto;
  --scanline-opacity: 0;
  --pixel-grid-opacity: 0;
  --bg-darkest: #0a0a0a;
  --bg-dark: #111111;
  --bg-mid: #1a1a1a;
  --bg-panel: #1e1e1e;
  --bg-panel-light: #252525;
  --border-dark: #0a0a0a;
  --border-light: #00ff41;
  --border-highlight: #33ff66;
  --text-default: #00ff41;
  --text-dim: #009926;
  --text-bright: #66ff88;
  --gold: #00ff41;
  --gold-dark: #009926;
  --green: #00ff41;
  --green-dark: #009926;
  --blue: #00ccff;
  --red: #ff3333;
  --purple: #cc44ff;
  --shadow-pixel: 0 0 8px rgba(0, 255, 65, 0.1);
  --shadow-pixel-raised: 0 0 12px rgba(0, 255, 65, 0.15);
  --shadow-pixel-gold: 0 0 8px rgba(0, 255, 65, 0.2);
  --shadow-pixel-pressed: inset 0 0 4px rgba(0, 255, 65, 0.1);
}

/* Global border radius from theme */
*,
*::before,
*::after {
  border-radius: var(--border-radius, 0px) !important;
}

/* Scanline overlay â€” only visible in pixel theme */
body::after {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 9999;
  background: repeating-linear-gradient(
    to bottom,
    transparent 0px,
    transparent 2px,
    rgba(0, 0, 0, var(--scanline-opacity, 0)) 2px,
    rgba(0, 0, 0, var(--scanline-opacity, 0)) 4px
  );
}

/* Pixel grid background */
body {
  background-color: var(--bg-darkest, #0f0e17);
  background-image:
    linear-gradient(rgba(68, 136, 255, var(--pixel-grid-opacity, 0)) 1px, transparent 1px),
    linear-gradient(90deg, rgba(68, 136, 255, var(--pixel-grid-opacity, 0)) 1px, transparent 1px);
  background-size: 16px 16px;
}

/* Text shadow utilities */
.text-shadow-pixel {
  text-shadow: 2px 2px 0 rgba(0, 0, 0, 0.5);
}

.text-shadow-deep {
  text-shadow: 2px 2px 0 #000, 4px 4px 0 rgba(0, 0, 0, 0.3);
}

/* Pixel scrollbar */
::-webkit-scrollbar {
  width: 12px;
}

::-webkit-scrollbar-track {
  background: var(--bg-dark, #1a1a2e);
  border-left: 2px solid var(--border-dark, #111122);
}

::-webkit-scrollbar-thumb {
  background: var(--border-light, #4a4e6e);
  border: 2px solid var(--border-dark, #111122);
}

::-webkit-scrollbar-thumb:hover {
  background: var(--border-highlight, #6e72a0);
}

/* Scroll-reveal animation */
.scroll-reveal {
  opacity: 0;
  transform: translateY(24px);
  transition: opacity 0.5s steps(4), transform 0.5s steps(4);
}

.scroll-reveal.visible {
  opacity: 1;
  transform: translateY(0);
}

/* XP bar shine effect */
@keyframes xp-shine {
  0% { left: -40%; }
  100% { left: 140%; }
}

.xp-bar-shine::after {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.15),
    transparent
  );
  width: 40%;
  animation: xp-shine 3s steps(12) infinite;
}

/* Selection color */
::selection {
  background: var(--gold, #f5c542);
  color: var(--bg-darkest, #0f0e17);
}

/* Snap scrolling */
.snap-container {
  overflow-y: scroll;
  scroll-snap-type: y mandatory;
  scroll-behavior: smooth;
  scrollbar-width: none;          /* Firefox */
  -ms-overflow-style: none;       /* IE/Edge */
}

.snap-container::-webkit-scrollbar {
  display: none;                  /* Chrome/Safari */
}

.snap-section {
  min-height: calc(100vh - 64px);
  scroll-snap-align: start;
  display: flex;
  flex-direction: column;
  justify-content: center;
}

.snap-section-end {
  min-height: calc(100vh - 64px);
  scroll-snap-align: start;
  display: flex;
  flex-direction: column;
}

/* Scroll indicator */
.scroll-indicator {
  position: fixed;
  right: 16px;
  top: 50%;
  transform: translateY(-50%);
  z-index: 40;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.scroll-indicator-dot {
  width: 10px;
  height: 10px;
  border: 2px solid var(--border-light, #4a4e6e);
  background: var(--bg-dark, #1a1a2e);
  cursor: pointer;
  position: relative;
  transition: background 0.15s steps(3), border-color 0.15s steps(3);
  image-rendering: var(--image-rendering, auto);
  padding: 0;
}

.scroll-indicator-dot:hover {
  border-color: var(--border-highlight, #6e72a0);
  background: var(--bg-panel, #2d334a);
}

.scroll-indicator-dot.active {
  background: var(--gold, #f5c542);
  border-color: var(--gold, #f5c542);
  box-shadow: 0 0 0 2px rgba(245, 197, 66, 0.2);
}

/* Hover label */
.scroll-indicator-label {
  position: absolute;
  right: calc(100% + 10px);
  top: 50%;
  transform: translateY(-50%);
  font-family: var(--font-primary, 'Press Start 2P', monospace);
  font-size: 7px;
  color: var(--gold, #f5c542);
  background: var(--bg-dark, #1a1a2e);
  border: 2px solid var(--border-light, #4a4e6e);
  padding: 3px 6px;
  white-space: nowrap;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.1s steps(2);
}

.scroll-indicator-dot:hover .scroll-indicator-label {
  opacity: 1;
}

.scroll-indicator-dot.active .scroll-indicator-label {
  color: var(--gold, #f5c542);
  border-color: var(--gold, #f5c542);
}

/* Loading bar fill animation (Step 1 mockup) */
@keyframes loading-fill {
  0% { width: 0%; }
  80% { width: 85%; }
  100% { width: 92%; }
}

.loading-fill {
  animation: loading-fill 3s steps(16) infinite;
}

/* Floating animation */
@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-8px); }
}

.animate-float {
  animation: float 3s steps(6) infinite;
}

/* Matrix theme glow */
[data-theme="matrix"] .text-shadow-pixel {
  text-shadow: 0 0 6px rgba(0, 255, 65, 0.5);
}
